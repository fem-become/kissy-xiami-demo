/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Apr 17 00:21
*/
KISSY.add("event/custom/api-impl",function(e,h,c,j){var g=c._Utils,k=g.splitAndRun;return e.mix(h,{fire:function(d,a,b){var f=void 0,l=h.getTargets(d,1),n=l&&l.length,b=b||{};k(a,function(a){var l;g.fillGroupsForEvent(a,b);a=b.type;if((l=j.getCustomEvent(d,a))||n){if(l){if(!l.hasObserver()&&!l.defaultFn&&(l.bubbles&&!n||!l.bubbles))return}else l=new j({currentTarget:d,type:a});a=l.fire(b);!1!==f&&(f=a)}});return f},publish:function(d,a,b){var f;k(a,function(a){f=j.getCustomEvent(d,a,1);e.mix(f,b)});
return d},getCustomEvent:function(d,a,b){return j.getCustomEvent(d,a,b)},addTarget:function(d,a){var b=h.getTargets(d);e.inArray(a,b)||b.push(a);return d},removeTarget:function(d,a){var b=h.getTargets(d),f=e.indexOf(a,b);-1!=f&&b.splice(f,1);return d},getTargets:function(d,a){a||(d["__~ks_bubble_targets"]=d["__~ks_bubble_targets"]||[]);return d["__~ks_bubble_targets"]},on:function(d,a,b,f){g.batchForType(function(a,b,f){b=g.normalizeParam(a,b,f);a=b.type;if(a=j.getCustomEvent(d,a,1))a.on(b)},0,a,
b,f);return d},detach:function(d,a,b,f){g.batchForType(function(a,b,f){var c=g.normalizeParam(a,b,f);(a=c.type)?(a=j.getCustomEvent(d,a,1))&&a.detach(c):(a=j.getCustomEvents(d),e.each(a,function(a){a.detach(c)}))},0,a,b,f);return d}})},{requires:["./api","event/base","./observable"]});KISSY.add("event/custom/api",function(){return{}});
KISSY.add("event/custom",function(e,h,c,j){var g={};e.each(c,function(c,d){g[d]=function(){var a=e.makeArray(arguments);a.unshift(this);return c.apply(null,a)}});c=e.mix({_ObservableCustomEvent:j,Target:g},c);e.mix(h,{Target:g,Custom:c});e.EventTarget=g;return c},{requires:["./base","./custom/api-impl","./custom/observable"]});KISSY.add("event/custom/object",function(e,h){function c(j){c.superclass.constructor.call(this);e.mix(this,j)}e.extend(c,h._Object);return c},{requires:["event/base"]});
KISSY.add("event/custom/observable",function(e,h,c,j,g){function k(){k.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var d=g._Utils;e.extend(k,g._ObservableEvent,{constructor:k,on:function(a){a=new c(a);-1==this.findObserver(a)&&this.observers.push(a)},fire:function(a){var a=a||{},b=this.bubbles,f=this.currentTarget,d,c=this.type,e=this.defaultFn,g,i=a,m;a.type=c;i instanceof j||(i.target=f,i=new j(i));i.currentTarget=f;a=this.notify(i);
!1!==m&&(m=a);if(b&&!i.isPropagationStopped()){d=(b=h.getTargets(f,1))&&b.length||0;for(g=0;g<d&&!i.isPropagationStopped();g++)a=h.fire(b[g],c,i),!1!==m&&(m=a)}if(e&&!i.isDefaultPrevented()&&(c=k.getCustomEvent(i.target,i.type),!this.defaultTargetOnly&&!c.defaultTargetOnly||f==i.target))m=e.call(f,i);return m},notify:function(a){var b=[].concat(this.observers),f,d,c=b.length,e;for(e=0;e<c&&!a.isImmediatePropagationStopped();e++)f=b[e].notify(a,this),!1!==d&&(d=f),!1===f&&a.halt();return d},detach:function(a){var b,
f=a.fn,c=a.context,e=this.currentTarget,g=this.observers,a=a.groups;if(g.length){a&&(b=d.getGroupsRe(a));var j,i,h,k,o=g.length;if(f||b){c=c||e;j=a=0;for(i=[];a<o;++a)if(h=g[a],k=h.context||e,c!=k||f&&f!=h.fn||b&&!h.groups.match(b))i[j++]=h;this.observers=i}else this.reset()}}});k.getCustomEvent=function(a,b,d){var c,e=k.getCustomEvents(a,d);c=e&&e[b];!c&&d&&(c=e[b]=new k({currentTarget:a,type:b}));return c};k.getCustomEvents=function(a,b){!a["__~ks_custom_events"]&&b&&(a["__~ks_custom_events"]={});
return a["__~ks_custom_events"]};return k},{requires:["./api","./observer","./object","event/base"]});KISSY.add("event/custom/observer",function(e,h){function c(){c.superclass.constructor.apply(this,arguments)}e.extend(c,h._Observer,{keys:["fn","context","groups"]});return c},{requires:["event/base"]});
