/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jan 31 22:54
*/
KISSY.add("anim/base",function(d,e,h,i,g){function f(a){this.config=a;this.el=e.get(a.el);this._backupProps={};this._propsData={};if(a=a.complete)this.on("complete",a)}var b=e.NodeType,c={toggle:1,hide:1,show:1};d.augment(f,i.Target,{prepareFx:function(){},runInternal:function(){var a=this,k=a.config,j=a.el,g,f=a._backupProps,i=a._propsData,n=k.props,o=k.delay||0,p=k.duration;h.saveRunningAnim(a);if(!1===a.fire("beforeStart"))a.stop(0);else{d.each(n,function(a,b){d.isPlainObject(a)||(a={value:a});
i[b]=d.mix({delay:o,easing:k.easing,frame:k.frame,duration:p},a)});if(j.nodeType==b.ELEMENT_NODE){var m,l;l="none"===e.css(j,"display");d.each(i,function(b,d){g=b.value;if(c[g]){if("hide"==g&&l||"show"==g&&!l)return a.stop(1),m=!1;f[d]=e.style(j,d);"toggle"==g?g=l?"show":"hide":"hide"==g?(b.value=0,f.display="none"):(b.value=e.css(j,d),e.css(j,d,0),e.show(j))}});if(!1===m)return}a.startTime=d.now();a.prepareFx();a.doStart()}},isRunning:function(){return h.isAnimRunning(this)},isPaused:function(){return h.isAnimPaused(this)},
pause:function(){this.isRunning()&&(this._runTime=d.now()-this.startTime,h.removeRunningAnim(this),h.savePausedAnim(this),this.doStop());return this},doStop:function(){},doStart:function(){},resume:function(){this.isPaused()&&(this.startTime=d.now()-this._runTime,h.removePausedAnim(this),h.saveRunningAnim(this),this.beforeResume(),this.doStart());return this},beforeResume:function(){},run:function(){var a;a=this.config.queue;!1===a?this.runInternal():(a=g.queue(this.el,a,this),1==a.length&&this.runInternal());
return this},stop:function(a){var b=this.el,c=this.config.queue;if(!this.isRunning()&&!this.isPaused())return!1!==c&&g.remove(b,c,this),this;h.removeRunningAnim(this);h.removePausedAnim(this);this.doStop(a);if(a){var f;d.isEmptyObject(f=this._backupProps)||e.css(this.el,f);this.fire("complete")}!1!==c&&(a=g.dequeue(b,c))&&a[0]&&a[0].runInternal();this.fire("end");return this}});f.Utils=h;f.Q=g;return f},{requires:["dom","./base/utils","event/custom","./base/queue"]});
KISSY.add("anim/base/queue",function(d,e){function h(b,c,a){var c=c||g,d,f=e.data(b,i);!f&&!a&&e.data(b,i,f={});f&&(d=f[c],!d&&!a&&(d=f[c]=[]));return d}var i=d.guid("ks-queue-"+d.now()+"-"),g=d.guid("ks-queue-"+d.now()+"-"),f;return f={queueCollectionKey:i,queue:function(b,c,a){b=h(b,c);b.push(a);return b},remove:function(b,c,a){var e=h(b,c,1);e&&(a=d.indexOf(a,e),-1<a&&e.splice(a,1));e&&!e.length&&f.clearQueue(b,c);return e},clearQueues:function(b){e.removeData(b,i)},clearQueue:function(b,c){var c=
c||g,a=e.data(b,i);a&&delete a[c];d.isEmptyObject(a)&&e.removeData(b,i)},dequeue:function(b,c){var a=h(b,c,1);a&&(a.shift(),a.length||f.clearQueue(b,c));return a}}},{requires:["dom"]});
KISSY.add("anim/base/utils",function(d,e,h,i){var g=d.guid("ks-anim-unqueued-"+d.now()+"-"),f=d.guid("ks-anim-paused-"+d.now()+"-");return{saveRunningAnim:function(b){var c=b.el,a=e.data(c,g);a||e.data(c,g,a={});a[d.stamp(b)]=b},removeRunningAnim:function(b){var c=b.el,a=e.data(c,g);a&&(delete a[d.stamp(b)],d.isEmptyObject(a)&&e.removeData(c,g))},isAnimPaused:function(b){var c=e.data(b.el,f);return c?!!c[d.stamp(b)]:0},removePausedAnim:function(b){var c=b.el,a=e.data(c,f);a&&(delete a[d.stamp(b)],
d.isEmptyObject(a)&&e.removeData(c,f))},savePausedAnim:function(b){var c=b.el,a=e.data(c,f);a||e.data(c,f,a={});a[d.stamp(b)]=b},isAnimRunning:function(b){var c=e.data(b.el,g);return c?!!c[d.stamp(b)]:0},isElPaused:function(b){return(b=e.data(b,f))&&!d.isEmptyObject(b)},isElRunning:function(b){return(b=e.data(b,g))&&!d.isEmptyObject(b)},pauseOrResumeQueue:function(b,c,a){b=e.data(b,"resume"==a?f:g);b=d.merge(b);d.each(b,function(b){if(c===i||b.config.queue==c)b[a]()})},stopEl:function(b,c,a,f){a&&
(f===i?h.clearQueues(b):!1!==f&&h.clearQueue(b,f));b=e.data(b,g);b=d.merge(b);d.each(b,function(a){(f===i||a.config.queue==f)&&a.stop(c)})}}},{requires:["dom","./queue"]});
