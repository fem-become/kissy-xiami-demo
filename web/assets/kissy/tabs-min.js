/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 15 21:38
*/
KISSY.add("tabs/bar",function(b,d,a){var h=d.extend({initializer:function(){this.get("elAttrs").role="tablist"},bindUI:function(){var a=this;a.on("afterSelectedChange",function(e){e.newVal&&e.target.isTabsTab&&a.set("selectedTab",e.target)})},syncUI:function(){var g=this,e=g.get("children");b.each(e,function(e){return e.get("selected")?(g.set("selectedTab",e),!1):a})},handleKeyEventInternal:function(a){var e=this.get("selectedTab"),a=this.getNextItemByKeyEventInternal(a,e);if(b.isBoolean(a))return a;
a.set("selected",!0);return!0},_onSetSelectedTab:function(a,e){var b;a&&(e&&(b=e.prevVal)&&b.set("selected",!1),a.set("selected",!0))},_onSetHighlightedItem:function(){h.superclass._onSetHighlightedItem.apply(this,arguments);"mouse"==this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{value:{xclass:"tabs-tab"}}}},{xclass:"tabs-bar",priority:30});h.ChangeType={CLICK:"click",MOUSE:"mouse"};return h},{requires:["toolbar"]});
KISSY.add("tabs/body",function(b,d,a,h){var g=d.Controller.extend([a.DecorateChildren],{bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(b){var i,c=a.get("children"),f;if(i=c[b.newVal])(f=c[b.prevVal])&&f.set("selected",!1),a.selectPanel(i)})},syncUI:function(){var a=this,d=a.get("children");b.each(d,function(i,c){return i.isController&&i.get("selected")?(a.set("selectedPanelIndex",c),!1):h})},renderChild:function(a){return this.get("lazyRender")&&(a.isController&&!a.get("selected")||
!a.isController&&!a.selected)?a:g.superclass.renderChild.apply(this,arguments)},selectPanel:function(a){a.isController?a.set("selected",!0):a.selected=!0;this.get("lazyRender")&&this.renderChild(a)}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleMouseEvents:{value:!1},defaultChildCfg:{value:{xclass:"tabs-panel"}}}},{xclass:"tabs-body"});return g},{requires:["component/base","component/extension"]});
KISSY.add("tabs/panel-render",function(b,d){return d.Render.extend({initializer:function(){var a=this.get("elAttrs");a.role="tabpanel";this.get("selected")?this.get("elCls").push(this.getCssClassWithState("selected")):a["aria-hidden"]=!1},_onSetSelected:function(a){var b=this.get("el"),d=this.getCssClassWithState("selected");b[a?"addClass":"removeClass"](d);b.attr("aria-hidden",!a)}},{ATTRS:{selected:{sync:0,value:!1}},HTML_PARSER:{selected:function(a){return a.hasClass(this.get("prefixCls")+"tabs-panel-selected")}}})},
{requires:["component/base"]});KISSY.add("tabs/panel",function(b,d,a){return d.Controller.extend({isTabsPanel:1},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},xrender:{value:a}}},{xclass:"tabs-panel"})},{requires:["component/base","./panel-render"]});
KISSY.add("tabs/render",function(b,d){return d.Render.extend({initializer:function(){this.get("elCls").push(this.getCssClassWithPrefix("tabs-"+this.get("barOrientation")))},_onSetBarOrientation:function(a){this.get("el").removeClass(this.getCssClassWithPrefix("tabs-top tabs-bottom tabs-left tabs-right")).addClass(this.getCssClassWithPrefix("tabs-"+a))}},{ATTRS:{barOrientation:{sync:0,value:"top"}},HTML_PARSER:{barOrientation:function(a){return(a=a[0].className.match(/tabs-(top|bottom|left|right)\b/))&&
a[1]||"top"}}})},{requires:["component/base"]});
KISSY.add("tabs/tab-render",function(b,d){return d.Render.extend({initializer:function(){var a=this.get("elAttrs");a.role="tab";this.get("selected")&&(a["aria-selected"]=!0,this.get("elCls").push(this.getCssClassWithState("selected")))},_onSetSelected:function(a){var b=this.get("el"),d=this.getCssClassWithState("selected");b[a?"addClass":"removeClass"](d);b.attr("aria-selected",!!a)}},{ATTRS:{selected:{value:!1,sync:0}},HTML_PARSER:{selected:function(a){var b=this.get("prefixCls")+"tabs-tab-selected";
return a.hasClass(b)}}})},{requires:["button"]});KISSY.add("tabs/tab",function(b,d,a){return d.extend({isTabsTab:!0,bindUI:function(){this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},xrender:{value:a}}},{xclass:"tabs-tab",priority:30})},{requires:["button","./tab-render"]});
KISSY.add("tabs",function(b,d,a,h,g,e,j){g=d.Controller.extend({initializer:function(){var a,c,f=this.get("prefixCls"),d={prefixCls:f,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},f={prefixCls:f,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},e=d.children,g=f.children;(c=this.get("items"))&&b.each(c,function(c){a=a||c.selected;e.push({content:c.title,selected:c.selected});g.push({content:c.content,selected:c.selected})});!a&&e.length&&(e[0].selected=!0,g[0].selected=
!0);this.set("bar",d);this.set("body",f)},addItem:function(a,c){var f=this.get("bar"),b,d,e=this.get("body");"undefined"==typeof c&&(c=f.get("children").length);b={content:a.title};d={content:a.content};b=f.addChild(b,c);e.addChild(d,c);a.selected&&(f.set("selectedTab",b),e.set("selectedPanelIndex",c));return this},removeItemAt:function(a,c){var f=this.get("bar"),b=f.get("children"),d=f.getChildAt(a),e=this.get("body");d.get("selected")&&(1==b.length?f.set("selectedTab",null):0==a?f.set("selectedTab",
f.getChildAt(a+1)):f.set("selectedTab",f.getChildAt(a-1)));f.removeChild(f.getChildAt(a),c);e.removeChild(e.getChildAt(a),c);return this},removeItemByTab:function(a,c){return this.removeItemAt(b.indexOf(a,this.get("bar").get("children")),c)},removeItemByPanel:function(a,c){return this.removeItemAt(b.indexOf(a,this.get("body").get("children")),c)},getSelectedTab:function(){var a=this.get("bar"),c=null;b.each(a.get("children"),function(a){if(a.get("selected"))return c=a,!1});return c},getSelectedPanel:function(){var a=
this.get("body"),c=null;b.each(a.get("children"),function(a){if(a.get("selected"))return c=a,!1});return c},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},setSelectedTab:function(a){var c=this.get("bar"),f=this.get("body");c.set("selectedTab",a);f.set("selectedPanelIndex",b.indexOf(a,c.get("children")));
return this},setSelectedPanel:function(a){var c=this.get("bar"),f=this.get("body"),a=b.indexOf(a,f.get("children"));f.set("selectedPanelIndex",a);c.set("selectedTab",this.getTabAt(a));return this},renderUI:function(){var a=this.get("barOrientation"),c=this.get("el"),b=this.get("body"),d=this.get("bar");d.set("render",c);b.set("render",c);"bottom"==a?(b.render(),d.render()):(d.render(),b.render())},decorateInternal:function(b){var c=this.get("prefixCls"),d=this.get("changeType"),e=b.children("."+c+
"tabs-bar"),b=b.children("."+c+"tabs-body");this.set("bar",new a({srcNode:e,changeType:d,prefixCls:c}));this.set("body",new h({srcNode:b,prefixCls:c}))},bindUI:function(){this.on("afterSelectedTabChange",function(a){this.setSelectedTab(a.newVal)})}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{setter:function(a){a&&!a.isController&&(a=this.createChild(a));a&&a.addTarget(this);return a},valueFn:function(){return d.create({xclass:"tabs-bar",
prefixCls:this.get("prefixCls")})}},body:{setter:function(a){return a&&!a.isController?this.createChild(a):a},valueFn:function(){return d.create({xclass:"tabs-body",prefixCls:this.get("prefixCls")})}},barOrientation:{view:1},xrender:{value:j}}},{xclass:"tabs"});g.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};g.ChangeType=a.ChangeType;g.Bar=a;g.Body=h;g.Panel=e;return g},{requires:"component/base,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
