KISSY.add("xiami/header",function(i,o,k,j,m){var b=i.all,n=b("#header"),a=null,h={},l=!1;return{getHeader:function(e){a&&a.hide();h[e]?(h[e].show(),a=h[e]):(a=h[e]=b('<div class="header-page"><a href="javascript:;" class="go-back"></a><a href="javascript:;" class="go-cat"></a><div class="do-search"></div><div class="title">午后音乐</div></div>').appendTo(n),a.all("a.go-back").on(j.Gesture.tap,function(){i.Player&&i.Player.fire("go-back");k.backward()}),a.all("a.go-cat").on(j.Gesture.tap,function(){var c=
b("#page");-1<c.css("-webkit-transform").indexOf("260")?(c.css("-webkit-transition","300ms"),c.css("transition","300ms"),c.css("-webkit-transform","translate3d(0px, 0, 0)"),b("body").css("overflow-x","hidden"),setTimeout(function(){b("#cat").hide();b("#page").css("-webkit-transform","none")},400)):(b("#cat").show(),c.css("-webkit-transition","300ms"),c.css("transition","300ms"),c.css("-webkit-transform","translate3d(260px, 0, 0)"))}),a.all(".do-search").on(j.Gesture.tap,function(){k.forward(e,"xiami/transition/search")}));
if("xiami/transition/home"===e&&!1==l){l=!0;var f=a.all("a.go-cat"),f=new m.Draggable({node:f,handlers:[f]}),g=null,d=b("#page");f.on("dragstart",function(c){g=c.pageX});f.on("drag",function(c){if(g!==null){var a=c.pageX-g,a=c.pageX;if(!(a<0)&&!(a>260)){b("#cat").show();d.css("-webkit-transition","0ms");d.css("transition","0ms");d.css("-webkit-transform","translate3d("+a+"px, 0, 0)")}}});f.on("dragend",function(a){d.css("-webkit-transition","300ms");d.css("transition","300ms");if(a.pageX-g>100){d.css("-webkit-transform",
"translate3d(260px, 0, 0)");b("body").css("overflow-x","hidden")}else{d.css("-webkit-transform","translate3d(0, 0, 0)");b("body").css("overflow-x","hidden");setTimeout(function(){b("#cat").hide()},400)}g=null})}return a},setTitle:function(a){b("#header div.title").html(a)}}},{requires:["node","./transition/index","event","dd"]});
