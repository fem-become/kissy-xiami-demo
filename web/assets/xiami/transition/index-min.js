KISSY.add("xiami/transition/index",function(p,o){var j=o.all,c=[];return{forward:function(a,h,d){d=d||{};d.forwardFromMod=a;c.push([a,h,d]);KISSY.use(h+","+a,function(a,i,b){i.init(d);var e=i.getEl(),f=b.getEl(),i=j(window).width(),c=a.Features.isTransitionSupported(),b={left:0},k={left:-i};if(c){var g=(a=a.Features.getTransformPrefix())?"-"+a.toLowerCase()+"-transform":"transform";e.css(g,"translate3d("+i+"px,0,0)");b={};b[g]="translate3d(0px,0,0)";k={};k[g]="translate3d(-"+i+"px,0,0)"}else e.css("left",
i);e.show();e.animate(b,{duration:0.3,useTransition:!0,complete:function(){c&&e.css(g,"none")}});-1<h.indexOf("player")&&j("#suspender").hide();j("#header").removeClass("header-is-home");f.animate(k,{duration:0.3,useTransition:!0,complete:function(){f.hide();window.scroll(0,0)}})})},backward:function(){var a=c.pop(),h=a[1],d=a[0],n=(a=c[c.length-1])?a[2]:{};n.backwardFromMod=h;KISSY.use(d+","+h,function(a,b,e){b.init(n);var f=b.getEl(),c=e.getEl(),b=j(window).width(),k=a.Features.isTransitionSupported(),
g={left:0},m={left:b};if(k){var l=(a=a.Features.getTransformPrefix())?"-"+a.toLowerCase()+"-transform":"transform";f.css(l,"translate3d(-"+b+"px,0,0)");g={};g[l]="translate3d(0px,0,0)";m={};m[l]="translate3d("+b+"px,0,0)"}else f.css("left",-b);f.show();f.animate(g,{duration:0.3,useTransition:!0,complete:function(){k&&f.css(l,"none")}});-1<d.indexOf("home")&&j("#header").addClass("header-is-home");-1<h.indexOf("player")&&j("#suspender").show();e.getEl().animate(m,{duration:0.3,useTransition:!0,complete:function(){c.hide();
window.scroll(0,0)}})})}}},{requires:["node"]});
